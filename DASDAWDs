-- 🌌 SDVT SAB v6.0 — Visual Auto Navigation (Safe)
-- Không auto nhấn phím, không tween. Hiển thị đường, hướng và gợi ý WASD.
-- UI: Rayfield classic (https://sirius.menu/rayfield)

-- 🧩 Load Rayfield
local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()
local Players = game:GetService("Players")
local PathfindingService = game:GetService("PathfindingService")
local RunService = game:GetService("RunService")
local TweenService = game:GetService("TweenService")
local player = Players.LocalPlayer

-- 🌌 Create main window
local Window = Rayfield:CreateWindow({
	Name = "SDVT SAB v6.0",
	LoadingTitle = "SDVT Hub",
	LoadingSubtitle = "Visual Auto Navigation"
})

-- 🧠 TAB 1: INFO
local InfoTab = Window:CreateTab("📜 Info", 4483362458)
InfoTab:CreateSection("👤 Thông tin người dùng")
InfoTab:CreateLabel("Tên: " .. player.Name)
InfoTab:CreateLabel("UserID: " .. player.UserId)
InfoTab:CreateLabel("GameID: " .. game.PlaceId)
InfoTab:CreateLabel("Phiên bản: v6.0 (Safe Mode)")

-- 📍 TAB 2: MAIN
local MainTab = Window:CreateTab("🧭 Main", 4483362458)
MainTab:CreateSection("📌 Lấy & Copy tọa độ")

MainTab:CreateButton({
	Name = "📍 Lấy & Copy tọa độ hiện tại",
	Callback = function()
		local char = player.Character or player.CharacterAdded:Wait()
		local hrp = char:WaitForChild("HumanoidRootPart")
		local pos = hrp.Position
		local coord = string.format("X: %.2f, Y: %.2f, Z: %.2f", pos.X, pos.Y, pos.Z)
		setclipboard(coord)
		Rayfield:Notify({Title="✅ Đã sao chép", Content=coord, Duration=3})
	end
})

-- 🎃 TAB 3: EVENT
local EventTab = Window:CreateTab("🎃 Event", 4483362458)
EventTab:CreateSection("🪦 Graveyard Visual Assist")

local GravePoints = {
	Vector3.new(-325.63, -6.39, 58.34),  -- Go #1
	Vector3.new(-377.17, -6.98, 183.61), -- Go #2
	Vector3.new(-320.29, -6.99, 171.93)  -- Go #3
}

local function drawPath(waypoints)
	local parts = {}
	for i = 1, #waypoints-1 do
		local p1, p2 = waypoints[i].Position, waypoints[i+1].Position
		local dist = (p1 - p2).Magnitude
		local mid = (p1 + p2) / 2
		local part = Instance.new("Part")
		part.Anchored = true
		part.CanCollide = false
		part.Material = Enum.Material.Neon
		part.Size = Vector3.new(0.25, 0.25, dist)
		part.CFrame = CFrame.new(mid, p2)
		part.Color = Color3.fromRGB(0, 255, 150)
		part.Transparency = 0.25
		part.Parent = workspace
		table.insert(parts, part)
	end
	return parts
end

local function clearPath(parts)
	for _, p in ipairs(parts) do
		if p and p.Parent then p:Destroy() end
	end
end

local function showPathTo(target)
	local char = player.Character or player.CharacterAdded:Wait()
	local hrp = char:WaitForChild("HumanoidRootPart")
	local path = PathfindingService:CreatePath({
		AgentRadius = 2,
		AgentHeight = 5,
		AgentCanClimb = true,
		AgentCanJump = true
	})
	path:ComputeAsync(hrp.Position, target)
	if path.Status ~= Enum.PathStatus.Success then
		Rayfield:Notify({Title="⚠️ Không tìm thấy đường", Content="Điểm này bị chặn hoặc không hợp lệ.", Duration=3})
		return
	end
	local waypoints = path:GetWaypoints()
	local parts = drawPath(waypoints)
	Rayfield:Notify({
		Title="✅ Đã vẽ đường đi",
		Content="Đi theo đường neon màu xanh lá.\nGiữ SHIFT thỉnh thoảng để chạy nhanh.",
		Duration=5
	})
	task.delay(15, function() clearPath(parts) end)
end

EventTab:CreateButton({
	Name = "🪦 Go #1 (Graveyard 1)",
	Callback = function() showPathTo(GravePoints[1]) end
})

EventTab:CreateButton({
	Name = "🪦 Go #2 (Graveyard 2)",
	Callback = function() showPathTo(GravePoints[2]) end
})

EventTab:CreateButton({
	Name = "🪦 Go #3 (Graveyard 3)",
	Callback = function() showPathTo(GravePoints[3]) end
})

-- 🚗 TAB 4: AUTO
local AutoTab = Window:CreateTab("⚙️ Auto", 4483362458)
AutoTab:CreateSection("🧭 Auto Navigation Preview")

AutoTab:CreateLabel("💡 Tính năng này chỉ **vẽ và xem trước** lộ trình.\nKhông tự điều khiển nhân vật, an toàn tuyệt đối.")

AutoTab:CreateButton({
	Name = "🚶‍♂️ Xem trước đường tới Graveyard #1",
	Callback = function() showPathTo(GravePoints[1]) end
})

AutoTab:CreateButton({
	Name = "🚶‍♂️ Xem trước đường tới Graveyard #2",
	Callback = function() showPathTo(GravePoints[2]) end
})

AutoTab:CreateButton({
	Name = "🚶‍♂️ Xem trước đường tới Graveyard #3",
	Callback = function() showPathTo(GravePoints[3]) end
})

AutoTab:CreateButton({
	Name = "🧹 Xóa tất cả đường hiện tại",
	Callback = function()
		for _, obj in pairs(workspace:GetChildren()) do
			if obj:IsA("Part") and obj.Material == Enum.Material.Neon then
				obj:Destroy()
			end
		end
		Rayfield:Notify({Title="🧽 Đã xóa đường", Content="Tất cả vạch neon đã bị xóa.", Duration=2})
	end
})

-- Auto load UI config
pcall(function() Rayfield:LoadConfiguration() end)

Rayfield:Notify({
	Title="🌌 SDVT SAB v6.0",
	Content="Giao diện đã sẵn sàng.\nSử dụng tab Auto để xem trước lộ trình an toàn.",
	Duration=5
})
