-- 🧩 Load Rayfield
local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

-- 🌌 Tạo cửa sổ chính
local Window = Rayfield:CreateWindow({
    Name = "SDVT SAB",
    LoadingTitle = "SDVT Hub",
    LoadingSubtitle = "Auto Script",
    ConfigurationSaving = {
        Enabled = true,
        FolderName = "SDVT",
        FileName = "SDVTSAB"
    }
})

local player = game.Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local humanoid = character:WaitForChild("Humanoid")
local hrp = character:WaitForChild("HumanoidRootPart")

-- ========================
-- 📜 TAB 1: INFO
-- ========================
local InfoTab = Window:CreateTab("📜 Info", 4483362458)
InfoTab:CreateSection("👤 Thông tin người dùng")
InfoTab:CreateLabel("Tên người dùng: " .. player.Name)
InfoTab:CreateLabel("UserID: " .. player.UserId)
InfoTab:CreateLabel("Game ID: " .. game.PlaceId)
InfoTab:CreateLabel("Mô tả: Đây là Script Hub SDVT - hỗ trợ auto & tiện ích Roblox")

-- ========================
-- 🧭 TAB 2: MAIN
-- ========================
local MainTab = Window:CreateTab("🧭 Main", 4483362458)
MainTab:CreateSection("📌 Hệ thống Auto")

local autoBuy = false

-- Hàm tìm model Noobini Pizzanini
local function findNoobini()
	for _, obj in ipairs(workspace:GetDescendants()) do
		if obj:IsA("Model") and obj.Name == "Noobini Pizzanini" and obj:FindFirstChild("HumanoidRootPart") then
			return obj
		end
	end
end

-- Hàm kích hoạt E (ProximityPrompt)
local function triggerPrompt(obj)
	for _, prompt in ipairs(obj:GetDescendants()) do
		if prompt:IsA("ProximityPrompt") then
			fireproximityprompt(prompt)
			return true
		end
	end
	return false
end

-- Toggle Auto Buy
MainTab:CreateToggle({
	Name = "🍕 Auto Buy Noobini Pizzanini",
	CurrentValue = false,
	Flag = "AutoBuyNoobini",
	Callback = function(value)
		autoBuy = value
		if value then
			Rayfield:Notify({
				Title = "✅ Auto Buy Bắt đầu",
				Content = "Đang tìm và mua Noobini Pizzanini...",
				Duration = 3
			})
			task.spawn(function()
				while autoBuy do
					local npc = findNoobini()
					if npc then
						local npcHRP = npc:FindFirstChild("HumanoidRootPart")
						if npcHRP then
							local distance = (hrp.Position - npcHRP.Position).Magnitude

							if distance > 7 then
								humanoid:MoveTo(npcHRP.Position)
								humanoid.MoveToFinished:Wait()
							else
								triggerPrompt(npc)
								task.wait(3)
							end
						end
					else
						task.wait(1)
					end
					task.wait(0.2)
				end
			end)
		else
			Rayfield:Notify({
				Title = "⏹ Auto Buy Tắt",
				Content = "Đã dừng Auto Buy Noobini Pizzanini.",
				Duration = 2
			})
		end
	end
})

-- 🔁 Auto Load Config
Rayfield:Notify({
	Title = "📂 SDVT Auto Load",
	Content = "Đã tự động tải menu SDVTSAB.",
	Duration = 3
})
